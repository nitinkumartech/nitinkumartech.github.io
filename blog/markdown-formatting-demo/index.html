<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Visualizing Git Repositories</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- Slick Carousel -->
  <link rel="stylesheet" href="https://nitin-kumar.com/plugins/slick/slick.css" />
  <link rel="stylesheet" href="https://nitin-kumar.com/plugins/slick/slick-theme.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://nitin-kumar.com/plugins/font-awesome/css/font-awesome.min.css" />

  <!-- Magnific Popup -->
  <link rel="stylesheet" href="https://nitin-kumar.com/plugins/magnafic-popup/magnific-popup.css" />

  <!-- Stylesheets -->
  
  <link href="https://nitin-kumar.com/scss/style.min.css" rel="stylesheet" />

  <!--Favicon-->
  <link rel="shortcut icon" href="https://nitin-kumar.com/images/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="https://nitin-kumar.com/images/favicon.png" type="image/x-icon" />
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR%20GOOGLE%20ANALYTICS%20CODE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'YOUR GOOGLE ANALYTICS CODE');
  </script>
  
</head>

<body>
  <nav class="navbar navbar-expand-lg fixed-top">
  <div class="container">
    <a href="https://nitin-kumar.com/" class="navbar-brand">
      <img src="https://nitin-kumar.com/images/site-navigation/logo.png" alt="site-logo">
    </a>
    <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbarCollapse">
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
      <ul class="nav navbar-nav main-navigation my-0 mx-auto">
        
        
        <li class="nav-item">
          <a href="https://nitin-kumar.com/#home"
            class="nav-link text-dark text-sm-center p-2 ">Home</a>
        </li>
        
        <li class="nav-item">
          <a href="https://nitin-kumar.com/#about"
            class="nav-link text-dark text-sm-center p-2 ">About</a>
        </li>
        
        <li class="nav-item">
          <a href="https://nitin-kumar.com/#resume"
            class="nav-link text-dark text-sm-center p-2 ">Resume</a>
        </li>
        
        <li class="nav-item">
          <a href="https://nitin-kumar.com/#blog"
            class="nav-link text-dark text-sm-center p-2 ">Blog</a>
        </li>
        
        <li class="nav-item">
          <a href="https://nitin-kumar.com/#contact"
            class="nav-link text-dark text-sm-center p-2 ">Contact</a>
        </li>
        
      </ul>
      <div class="navbar-nav">
        <a href="https://nitin-kumar.com/contact" class="btn btn-primary btn-zoom hire_button">Hire Me Now</a>
      </div>
    </div>
  </div>
</nav>
  <div id="content">
    

<header class="breadCrumb">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-md-12 offset-lg-1 offset-md-0 text-center">
        <h3 class="breadCrumb__title">Visualizing Git Repositories</h3>
        <nav aria-label="breadcrumb" class="d-flex justify-content-center">
          <ol class="breadcrumb align-items-center">
            <li class="breadcrumb-item"><a href=https://nitin-kumar.com/>Home</a></li>
            <li class="breadcrumb-item"><a href=https://nitin-kumar.com/blog>All Post</a></li>
            <li class="breadcrumb-item active" aria-current="page">Visualizing Git Repositories</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="section singleBlog">
  <div class="svg-img">
      <img src=https://nitin-kumar.com/images/hero/figure-svg.svg alt="">
  </div>
  <div class="animate-shape">
      
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 600">
          <defs>
              <linearGradient id="d" x1="0.929" y1="0.111" x2="0.263" y2="0.935" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#f1f6f9" />
                  <stop offset="1" stop-color="#f1f6f9" stop-opacity="0" />
              </linearGradient>
          </defs>
          <g data-name="blob-shape (3)">
              <path class="blob" fill="url(#d)"
                  d="M455.4 151.1c43.1 36.7 73.4 92.8 60.8 136.3-12.7 43.5-68.1 74.4-111.3 119.4-43.1 45-74 104.1-109.8 109-35.9 5-76.7-44.2-111.8-89.2-35.2-45-64.7-85.8-70.8-132.6-6-46.8 11.6-99.6 46.7-136.3 35.2-36.6 88-57.2 142.4-58.8 54.5-1.7 110.6 15.6 153.8 52.2z" />
          </g>
      </svg>
  </div>
  <div class="animate-pattern">
      <img src=https://nitin-kumar.com/images/service/background-pattern.svg alt="background-shape">
  </div>
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="singleBlog__feature">
                  <img src=https://nitin-kumar.com/images/single-blog/feature-image.png alt="feature-image">
              </div>
          </div>
      </div>
      <div class="row mt-5">
          <div class="col-lg-12">
              <div class="singleBlog__content">
                  <p>TLDR: This are the high level steps to create visualizations for your own Git repositories as the example below.</p>
<ul>
<li>
<p>Use Gource for creating the git visualization PPM frames</p>
</li>
<li>
<p>Use FFmpeg for converting PPM frames to MPEG/AVI (any codec) of your choice</p>
</li>
<li>
<p>Use combination of sox and FFmpeg to add background music to the generated video (Optional). I did this step because I am anyways uploading this to YouTube).</p>
</li>
</ul>
<p>You can find all the pre-rendered videos here. Do like and subscribe the channel if you like it, helps me a lot in keeping me motivated to keep doing these fun stuffs.</p>
<h2 id="introduction">Introduction:</h2>
<p>The side-project I did was to create the git visualizations as attached above for top 100 starred projects in GitHub. Aim is to provide an End of Year update for 2020 for the aforementioned open-source projects.</p>
<p>This seemed a trivial task but, boy o' boy, I struggled to get this working properly. So, lets&rsquo;s go through each steps in detail below:</p>
<h2 id="step-1-gource--ffmpeg--sox">Step 1: Gource | FFmpeg | sox</h2>
<p>Download and install Gource, FFmpeg and sox(optional) on your OS of choice. For FFmpeg and sox, the binary has to be added to path but steps should be relatively easy. Gource puts the binary in path automatically but if it doesn&rsquo;t just the binary dirt to the path manually.</p>
<h2 id="step-2-clone-repo-of-choice">Step 2: Clone Repo Of Choice</h2>
<p>Clone the GitHub repo you want to create the visualizations of. (Ex. Kubernetes)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">git</span> <span style="color:#a6e22e">clone</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/kubernetes/kubernetes.git
</span></code></pre></div><h2 id="step-3-run-gource-and-ffmpeg">Step 3: Run Gource and FFmpeg</h2>
<p>To generate the video: cd in to the cloned directory and run the command</p>
<p>cd kubernetes</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">gource</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">hide</span> <span style="color:#a6e22e">filenames</span>,<span style="color:#a6e22e">dirnames</span>,<span style="color:#a6e22e">usernames</span>,<span style="color:#a6e22e">progress</span>,<span style="color:#a6e22e">mouse</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">font</span><span style="color:#f92672">-</span><span style="color:#a6e22e">size</span> <span style="color:#ae81ff">20</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">seconds</span><span style="color:#f92672">-</span><span style="color:#a6e22e">per</span><span style="color:#f92672">-</span><span style="color:#a6e22e">day</span> <span style="color:#ae81ff">0.1</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">auto</span><span style="color:#f92672">-</span><span style="color:#a6e22e">skip</span><span style="color:#f92672">-</span><span style="color:#a6e22e">seconds</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1920</span><span style="color:#a6e22e">x1080</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">o</span> <span style="color:#f92672">-</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">ffmpeg</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">y</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">r</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">f</span> <span style="color:#a6e22e">image2pipe</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">vcodec</span> <span style="color:#a6e22e">ppm</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">i</span> <span style="color:#f92672">-</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">vcodec</span> <span style="color:#a6e22e">libx264</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">preset</span> <span style="color:#a6e22e">ultrafast</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">pix_fmt</span> <span style="color:#a6e22e">yuv420p</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">crf</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">threads</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">bf</span> <span style="color:#ae81ff">0</span> <span style="color:#a6e22e">kubernetes</span>.<span style="color:#a6e22e">mp4</span>
</code></pre></div><h2 id="step-4-prepare-audio-to-be-mixed-optional">Step 4: Prepare Audio to be mixed (Optional)</h2>
<p>This was the first hurdle as my audio length was shorter than the video length and I wanted to loop the audio till the length of my video. Easy said and hard to do. But luckily, StackOverflow to the rescue and I got a quick fix.</p>
<p>So, I am using EpidemicSound for my background music and the usual track length for my genre of choice was ~3 mins. I used sox, to create a new mp3 file with an input mp3 looped 5 times. For ex. input mp3 -&gt; 3 mins, then output mp3 would be 15 mins.</p>
<p>This way my audio file would generally be longer than the video file. You&rsquo;ll see why I did this later in the next section. To do this copy the file in the same cloned folder and run the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">sox</span> <span style="color:#a6e22e">input_music</span>.<span style="color:#a6e22e">mp3</span> <span style="color:#a6e22e">looped_output_music</span>.<span style="color:#a6e22e">mp3</span> <span style="color:#a6e22e">repeat</span> <span style="color:#ae81ff">5</span>
</code></pre></div><p>Now, you would have a new looped_output_music.mp3 file of 5 times the length of the input mp3.</p>
<h2 id="step-5-do-the-actual-music-mux-optional">Step 5: Do the actual music mux (Optional)</h2>
<p>FFmpeg has a nifty feature where you can mux the audio and video with a flag(shorter) that will clip the audio where the video ends. So, on the running the command below, you would have the final video clip with audio</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">i</span> <span style="color:#a6e22e">kubernetes</span>.<span style="color:#a6e22e">mp4</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">i</span> <span style="color:#a6e22e">looped_output_music</span>.<span style="color:#a6e22e">mp3</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">shortest</span> <span style="color:#a6e22e">final_video</span>.<span style="color:#a6e22e">mp4</span>
</code></pre></div><p>Go Ahead and watch the video! You&rsquo;re done!</p>
<h2 id="orchestration-challenges">Orchestration Challenges:</h2>
<p>The above process will help you in generating the visualization for a single repository. But, my use case was to generate it for top 100 repositories. And hence, the challenge for orchestration. I solved it by creating a bunch of shell scripts triggered by cron as below:</p>
<ul>
<li>
<p>One off script - retrieve top 100 repository urls and clone everything in a folder</p>
</li>
<li>
<p>Recurring - take 10 repository batch and generate raw Gource video</p>
</li>
<li>
<p>Recurring - take the raw files one by one and mix it by randomly selected mp3 from a folder.</p>
</li>
</ul>
<p>I would also like to at some point of time to upload to YouTube programatically but this is manual for now :)</p>
<p>As of writing this article, there are 38 videos in my playlist and I don&rsquo;t think it&rsquo;ll take a long time to reach 100.</p>
<p>Hope you find it useful. Please message me if you need any help, I&rsquo;ll try my best to solve it for you.</p>
<p>You can visit my playlist below:</p>

              </div>
          </div>
      </div>
  </div>
</section>


  </div>
  <section class="footer" id="contact">
	<div class="footer__background_shape">
		<svg viewBox="0 0 1920 79">
			<path d="M0 0h1920v79L0 0z" data-name="Path 1450" />
		</svg>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="footer__cta">
					<div class="shape-1">
						<svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
							<path data-name="Path 1449"
								d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z"
								transform="translate(217.489 188.626)" />
						</svg>
					</div>
					<div class="shape-2">
						<svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
							<path data-name="Path 1449"
								d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z"
								transform="translate(217.489 188.626)" />
						</svg>
					</div>
					<div class="text-light footer__cta_content">
						<span>Contact me</span>
						<h2 class="mb-0">Let’s Start a Project</h2>
					</div>
					<div class="footer__cta_action">
						<a class="btn btn-light btn-zoom" href="https://nitin-kumar.com/contact">Get in
							touch</a>
					</div>
				</div>
			</div>
		</div>
		<div class="row footer__widget">
			<div class="col-lg-4">
				<div class="footer__widget_logo mb-5">
					<img src="https://nitin-kumar.com/images/contact/widget-logo.png" alt="widget-logo">
				</div>
			</div>
			<div class="col-lg-4">
				<div class="text-light footer__widget_sitemap mb-5">
					<h4 class="base-font">Sitemap</h4>
					<ul class="unstyle-list small">
						
						
						<li class="mb-2"><a class="text-light" href="https://nitin-kumar.com/about">About me</a></li>
						
						<li class="mb-2"><a class="text-light" href="https://nitin-kumar.com/">Frequently Ask Question</a></li>
						
						<li class="mb-2"><a class="text-light" href="https://nitin-kumar.com/">Privacy &amp; Policy</a></li>
						
						<li class="mb-2"><a class="text-light" href="https://nitin-kumar.com/">Latest Article</a></li>
						
					</ul>
				</div>
			</div>
			<div class="col-lg-4">
				<div class="text-light footer__widget_address mb-5">
					<h4 class="base-font">Address</h4>
					
					<ul class="fa-ul small">
						<li class="mb-2"><a class="text-light" href="tel:"><span class="fa-li"><i
										class="fa fa-phone"></i></span></a></li>
						<li class="mb-2"><a class="text-light" href="mailto:nitinkr0411@gmail.com"><span class="fa-li"><i
										class="fa fa-envelope"></i></span>nitinkr0411@gmail.com</a></li>
						<li class="mb-2">
							<span class="fa-li"><i class="fa fa-map-marker"></i></span>Montreal, Canada</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="row footer__footer">
			<div class="col-lg-6">
				<div class="footer__footer_copy text-light">
					<p>All right reserved copyright © Portio 2020</p>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="footer__footer_social">
					<ul class="unstyle-list">
						
						
						<li class="d-inline-block mx-2"><a class="text-light" target="_blank" href="https://www.facebook.com/"><i
									class="fa fa-facebook-official"></i></a>
						</li>
						
						<li class="d-inline-block mx-2"><a class="text-light" target="_blank" href="https://www.linkedin.com/"><i
									class="fa fa-linkedin-square"></i></a>
						</li>
						
						<li class="d-inline-block mx-2"><a class="text-light" target="_blank" href="https://www.pinterest.com/"><i
									class="fa fa-pinterest-square"></i></a>
						</li>
						
						<li class="d-inline-block mx-2"><a class="text-light" target="_blank" href="https://twitter.com/"><i
									class="fa fa-twitter-square"></i></a>
						</li>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</section>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR%20GOOGLE%20MAP%20API&libraries=geometry"></script>
<script src="https://nitin-kumar.com/plugins/jQuery/jquery.min.js"></script>
<script src="https://nitin-kumar.com/plugins/bootstrap/bootstrap.min.js"></script>
<script src="https://nitin-kumar.com/plugins/slick/slick.min.js"></script>
<script src="https://nitin-kumar.com/plugins/waypoint/jquery.waypoints.min.js"></script>
<script src="https://nitin-kumar.com/plugins/magnafic-popup/jquery.magnific-popup.min.js"></script>
<script src="https://nitin-kumar.com/plugins/tweenmax/TweenMax.min.js"></script>
<script src="https://nitin-kumar.com/plugins/imagesloaded/imagesloaded.min.js"></script>
<script src="https://nitin-kumar.com/plugins/masonry/masonry.min.js"></script>

<script src="https://nitin-kumar.com/js/form-handler.min.js"></script>

<script src="https://nitin-kumar.com/js/script.min.js"></script>

</body>

</html>